// Generated by CoffeeScript 1.4.0
(function() {

  $(document).ready(function() {
    chrome.extension.onMessage.addListener(function(request, sender, sendResponse) {
      var changeClass, color, element, font, fontSize, text;
      if (request.action === "loadBootstrap") {
        $("head").append("          <link href='//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css' rel='stylesheet'>        ");
        $('body').wrap('<div class="container" />');
      }
      if (request.action === "changeElement") {
        element = request.element;
        changeClass = request.changeClass;
        if (changeClass === "navbar") {
          $(element).wrap('<div class="navbar" />');
          $(element).addClass('brand');
          $(element).wrap('<div class="navbar-inner" />');
          $(".navbar-inner").append('<ul class="nav"></ul>');
        } else if (changeClass === "nav") {
          text = $(element).text();
          $(element).remove();
          $('ul.nav').append("<li><a href='#'>" + text + "</a></li>");
        } else {
          $(element).wrap('<div class=' + '"' + changeClass + '"' + ' />');
        }
      }
      if (request.action === "changeFont") {
        font = request.font;
        element = request.element;
        fontSize = request.fontSize;
        color = "#" + request.color;
        $("head").append("        <link href='http://fonts.googleapis.com/css?family=" + font + "' rel='stylesheet' type='text/css'>        ");
        font = font.split("+").join(" ");
        $(element).css;
        $(element).css('font-family', font);
        $(element).css('font-size', fontSize);
        return $(element).css('color', color);
      }
    });
    return $('h1, h2, h3, p, a').click(function(e) {
      var x;
      x = $(this);
      $('.clicked').css('background', 'none');
      $('.clicked').removeClass('clicked');
      x.addClass('clicked');
      x.css('background', 'rgb(255, 251, 204)');
      return chrome.extension.sendMessage({
        "tagName": x.prop("tagName").toLowerCase(),
        "fontSize": x.css("font-size")
      });
    });
  });

}).call(this);
